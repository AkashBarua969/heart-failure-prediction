<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Heart Failure Prediction</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-danger">
    <div class="container">
      <a class="navbar-brand" href="#">HeartCare by Akash</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#predict">Predict</a></li>
          <li class="nav-item"><a class="nav-link" href="/history">History</a></li>
          <li class="nav-item"><a class="nav-link" href="#advice">Advice</a></li>
          <li class="nav-item"><a class="nav-link" href="#specialists">Specialists</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <header class="bg-light py-5 text-center">
    <div class="container">
      <h1 class="display-5 text-danger">Heart Failure Prediction System</h1>
      <p class="lead">Predict your heart health with AI and take preventive actions early.</p>
      <img class="img-fluid rounded shadow" src="https://media.istockphoto.com/id/1359314170/photo/heart-attack-and-heart-disease-3d-illustration.jpg?s=612x612&w=0&k=20&c=K5Y-yzsfs7a7CyuAw-B222EMkT04iRmiEWzhIqF0U9E=" alt="Heart Image">
    </div>
  </header>

  <section id="predict" class="container py-5">
    <h2 class="mb-4 text-center text-danger">Predict Heart Failure</h2>
    <form id="prediction-form" class="row g-3 bg-white p-4 shadow rounded">
      <!-- Input fields remain same -->
      <div class="col-md-4"><label>Age</label><input type="number" class="form-control" id="age" required></div>
      <div class="col-md-4"><label>Sex</label><select class="form-select" id="sex" required><option value="M">Male</option><option value="F">Female</option></select></div>
      <div class="col-md-4"><label>Chest Pain Type</label><select class="form-select" id="cp" required><option value="ATA">ATA</option><option value="NAP">NAP</option><option value="ASY">ASY</option><option value="TA">TA</option></select></div>
      <div class="col-md-4"><label>Resting BP</label><input type="number" class="form-control" id="bp" required></div>
      <div class="col-md-4"><label>Cholesterol</label><input type="number" class="form-control" id="chol" required></div>
      <div class="col-md-4"><label>Fasting Blood Sugar</label><input type="number" class="form-control" id="fbs" min="0" max="1" required></div>
      <div class="col-md-4"><label>Resting ECG</label><select class="form-select" id="ecg" required><option value="Normal">Normal</option><option value="ST">ST</option><option value="LVH">LVH</option></select></div>
      <div class="col-md-4"><label>Max Heart Rate</label><input type="number" class="form-control" id="maxhr" required></div>
      <div class="col-md-4"><label>Exercise Angina</label><select class="form-select" id="angina" required><option value="N">No</option><option value="Y">Yes</option></select></div>
      <div class="col-md-6"><label>Oldpeak</label><input type="number" step="0.1" class="form-control" id="oldpeak" required></div>
      <div class="col-md-6"><label>ST Slope</label><select class="form-select" id="slope" required><option value="Up">Up</option><option value="Flat">Flat</option><option value="Down">Down</option></select></div>
      <div class="col-12 text-center"><button type="submit" class="btn btn-danger btn-lg">Predict Now</button></div>
    </form>
    <div id="prediction-result" class="mt-4"></div>
  </section>

  <!-- Advice Section -->
  <section id="advice" class="bg-light py-5 text-center">
    <div class="container">
      <h2 class="text-danger mb-4">Health Advice for Heart Disease</h2>
      <p class="lead">If you are at risk of heart disease, we recommend:</p>
      <ul class="list-group list-group-flush mx-auto" style="max-width: 600px;">
        <li class="list-group-item">✔️ Regular physical activity (walk/jog 30 mins/day)</li>
        <li class="list-group-item">✔️ Quit smoking and avoid alcohol</li>
        <li class="list-group-item">✔️ Eat less salt and sugar, focus on vegetables</li>
        <li class="list-group-item">✔️ Manage your stress with meditation or hobbies</li>
        <li class="list-group-item">✔️ Monitor blood pressure & cholesterol regularly</li>
      </ul>
    </div>
  </section>

  <!-- Specialists Section -->
  <section id="specialists" class="container py-5">
    <h2 class="text-center text-danger mb-4">Top Heart Specialists in Bangladesh</h2>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><a href="https://greenlifehospital.com.bd/consultant/professor-dr-munshi-md-mojibur-rahman" target="_blank">Professor Dr. Munshi Md. Mojibur Rahman – Green Life Hospital Ltd.</a></li>
      <li class="list-group-item"><a href="https://mountadora.com/doctors/prof-dr-shishir-basak/" target="_blank">PROF. DR. SHISHIR BASAK – Mount Adora Hospital, Akhalia.</a></li>
      <li class="list-group-item"><a href="https://www.doctorbangladesh.com/dr-dhiman-banik/" target="_blank">Prof. Dr. Dhiman Banik – National Heart Foundation Hospital & Research Institute</a></li>
    </ul>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="bg-light py-5">
    <div class="container">
      <h2 class="text-center text-danger mb-4">Contact Us</h2>
      <form class="mx-auto" style="max-width: 600px;">
        <div class="mb-3"><label>Name</label><input type="text" class="form-control" required></div>
        <div class="mb-3"><label>Email</label><input type="email" class="form-control" required></div>
        <div class="mb-3"><label>Message</label><textarea class="form-control" rows="4" required></textarea></div>
        <div class="text-center"><button class="btn btn-danger">Send Message</button></div>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-danger text-white text-center py-3">
    <p>&copy; 2025 HeartCare System. Developed by Akash Barua. All rights reserved.</p>
  </footer>

  <!-- Prediction JS -->
  <script>
    document.getElementById("prediction-form").addEventListener("submit", function (event) {
      event.preventDefault();

      const data = {
        Age: +document.getElementById("age").value,
        Sex: document.getElementById("sex").value,
        ChestPainType: document.getElementById("cp").value,
        RestingBP: +document.getElementById("bp").value,
        Cholesterol: +document.getElementById("chol").value,
        FastingBS: +document.getElementById("fbs").value,
        RestingECG: document.getElementById("ecg").value,
        MaxHR: +document.getElementById("maxhr").value,
        ExerciseAngina: document.getElementById("angina").value,
        Oldpeak: +document.getElementById("oldpeak").value,
        ST_Slope: document.getElementById("slope").value
      };

      fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(result => {
        const predictionBox = document.getElementById("prediction-result");
        if (result.prediction === 1) {
          predictionBox.innerHTML = `
            <div class="alert alert-danger shadow">
              <h4 class="alert-heading">⚠️ Heart Disease Detected</h4>
              <p>Please consult a cardiologist immediately and follow health precautions.</p>
            </div>`;
        } else {
          predictionBox.innerHTML = `
            <div class="alert alert-success shadow">
              <h4 class="alert-heading">✅ You are Heart Healthy!</h4>
              <p>Keep up the good lifestyle and stay active.</p>
            </div>`;
        }
      })
      .catch(error => {
        document.getElementById("prediction-result").innerHTML =
          `<div class="alert alert-warning">Error occurred during prediction.</div>`;
      });
    });
  </script>
</body>
</html>
